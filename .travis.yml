dist: trusty
sudo: false
language: python
matrix:
  include:
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=release RELEASE=yes
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=head
  allow_failures:
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=head
install:
- scripts/install-vault-${VAULT_BRANCH}.sh
- pip install tox
script:
- export PATH=$HOME/bin:$PATH
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then make package ; else make test ; fi
deploy:
  skip_cleanup: true
  provider: pypi
  user: lionelz
  on:
    tags: true
    all_branches: true
    repo: Aloomaio/async-hvac
    condition: $RELEASE == "yes"
  password:
    secure: kww4b7X8w0YY5Rrxb84hLhDLOvWNntHaVFf1DnTbAwsn0rDchiE9czmQeoqcB/s0Bym/L6f37XojR+FUQ/AhW4iOzyIlzQHY4DYZLc4R6YgSd+IA3bLGo2DKVd5GYQ8s5svKaexbF1ZplY3HVqDCIoQjtEdv0N8ri4aHqKTJgNtTn2+nyBrDCsKPE3Nswfm3MLfJXY3Ouh/X/JHqxzPigq6DfXh2r3MeGipPYRQgg1t63lSUPaV/LZk2wVtTdNjUjXXF6GFw//vOTjamaDP8JX+aojqXGg9JIKq/KF8kguCI4ZdZcNY8EZlttRz7nFI9hUeXrdZMGLdQ408vIhtSG+0P/2lVgr6j9MUtCpn7Wk0+uUKL0q3NBbnPPAPbRkBlW3w/TdtWilAwXChe7jAVhJlOSV3LHI33qXLJhWZbvEClmjAkwSBifYucr81B68m0WD+rfaRtl1QgV0njvLzcu0wCLHl+Sd7sKcW7Eoz++F6Ok0FiJps1vAM07ZwpSzO64cdVsUXEffQXgqPlxpjV3rB+ftLu+2QzCZ6rUE9dXcq2te2VFPNsGX/4OrZ4IpPw88ltTMoUkHgzsXEVrEM6Qff2SNVhpT+yCKzk2Esq3QmJNSsQMMiP6oUvAl+wtHm9CBiQtM9lX+JSfX6GRcBGbI7VB60xRSmJazB60V19Lrk=
