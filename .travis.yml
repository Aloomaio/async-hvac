dist: trusty
sudo: false
language: python
matrix:
  include:
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=release RELEASE=yes
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=head
  allow_failures:
  - python: '3.6'
    env: TOXENV=py36 VAULT_BRANCH=head
install:
- scripts/install-vault-${VAULT_BRANCH}.sh
- pip install tox
script:
- export PATH=$HOME/bin:$PATH
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then make package ; else make test ; fi
deploy:
  skip_cleanup: true
  provider: pypi
  user: lionelz
  on:
    tags: true
    all_branches: true
    repo: Aloomaio/async-hvac
    condition: $RELEASE == "yes"
  password:
    secure: kmwC9+RLWuECfDvvasNvhouToqJ1t6zw+5U2uutQ7+XEoqnlIrguBGukJzTaJPcQUYIfGoIRYlhUcHj9vu3UeGARIksgv2si/Y2DdQe6wh4X/AQHwGMPgOzbBl1OQGwr87rebbhXmlbvMSP4Oyv413olN94ULG5YYE+S5XTHBKzxZkh1ND6pmBXeDRYbhc4WkEyMFlulEhpanndd5b7M/LbNbXdmyHsI2oPHokD0Dbncn3X2IYsAA/s52Vz9SKAJqlCWEACwRxvtlI6I/W5AklFqyGPDx0VS69w2kWvrUM4ct4Xd9xLp4Kwp4aeY8JU8pKC1OgSkq4rphnoS3K9U8hHjjfArP7fQXaIi5+onX8FqyW0mrjmG96kmsk5zpLIcou54E3cNcHEWHzE2dvpuWgsoRvoxY/DB3jNTl2K5q0XeOk0lZAXaSHxobJC+BOShMOVehcjr28QJot/JR1XRbw0sNSnVVq+1ZVzgvTkXQZ69XC7B2WyF1amchV/NBkucYMBPTWU/G1eFTDEBGwlqI5WyA9xpNPyYvoLpyRs0ylgNqj+llGOh5YYTTeracssA+Tomz8ZNhdr/fe4cjRU0+ZCnPnCkZzZKa8ZqcYScNbuiiIQqDbHTbF7fUEWoIi/RIC8l9FI283GLuci29MRKcP5trI7guB2Np4F6i3fV1jc=